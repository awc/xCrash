SET(lzma_sources
        src/7zAlloc.c
        src/7zCrc.c
        src/7zCrcOpt.c
        src/Alloc.c
        src/Bra.c
        src/Bra86.c
        src/BraIA64.c
        src/CpuArch.c
        src/Delta.c
        src/Lzma2Dec.c
        src/LzmaDec.c
        src/Sha256.c
        src/Xz.c
        src/XzCrc64.c
        src/XzCrc64Opt.c
        src/XzDec.c)
ADD_LIBRARY(lzma STATIC ${lzma_sources})
TARGET_INCLUDE_DIRECTORIES(lzma PUBLIC include)
TARGET_COMPILE_OPTIONS(lzma
        PRIVATE
        -std=c11
        -Weverything
        -Werror
        -Wno-enum-conversion
        -Wno-reserved-id-macro
        -Wno-undef
        -Wno-missing-prototypes
        -Wno-missing-variable-declarations
        -Wno-cast-align
        -Wno-sign-conversion
        -Wno-assign-enum
        -Wno-unused-macros
        -Wno-padded
        -Wno-cast-qual
        -Wno-strict-prototypes
        -fPIC
        -D_7ZIP_ST)
TARGET_LINK_LIBRARIES(lzma)
